openapi: 3.0.3
info:
  title: Payments API
  version: v3

components:
  schemas:
    # ACCOUNTS
    V3AccountID:
      type: string

    V3AccountsCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: ''
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3Account'

    V3GetAccountResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3Account'

    V3CreateAccountRequest:
      type: object
      required:
        - reference
        - connectorID
        - createdAt
        - accountName
        - type
      properties:
        reference:
          type: string
        connectorID:
          type: string
          format: byte
        createdAt:
          type: string
          format: date-time
        accountName:
          type: string
        type:
          $ref: '#/components/schemas/V3AccountTypeEnum'
        defaultAsset:
          type: string
          pattern: ^[a-zA-Z]{3}\/[0-9]$
          nullable: true
        metadata:
          $ref: '#/components/schemas/V3Metadata'

    V3CreateAccountResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3Account'

    V3Account:
      type: object
      required:
        - id
        - connectorID
        - provider
        - reference
        - createdAt
        - type
        - raw
      properties:
        id:
          type: string
        connectorID:
          type: string
          format: byte
        connector:
          $ref: '#/components/schemas/V3ConnectorBase'
        provider:
          type: string
        reference:
          type: string
        createdAt:
          type: string
          format: date-time
        type:
          $ref: '#/components/schemas/V3AccountTypeEnum'
        name:
          type: string
          nullable: true
        defaultAsset:
          type: string
          nullable: true
        metadata:
          $ref: '#/components/schemas/V3Metadata'
        raw:
          type: object
    V3AccountTypeEnum:
      type: string
      enum:
        - UNKNOWN
        - INTERNAL
        - EXTERNAL

    # BALANCES
    V3BalancesCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: ''
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3Balance'
    V3Balance:
      type: object
      required:
        - accountID
        - createdAt
        - lastUpdatedAt
        - asset
        - balance
      properties:
        accountID:
          type: string
        createdAt:
          type: string
          format: date-time
        lastUpdatedAt:
          type: string
          format: date-time
        asset:
          type: string
        balance:
          type: integer
          format: bigint

    # BANK ACCOUNTS
    V3CreateBankAccountRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        accountNumber:
          type: string
        iban:
          type: string
        swiftBicCode:
          type: string
        country:
          type: string
        metadata:
          $ref: '#/components/schemas/V3Metadata'

    V3CreateBankAccountResponse:
      type: object
      required:
        - data
      properties:
        data:
          description: The ID of the created bank account
          type: string

    V3UpdateBankAccountMetadataRequest:
      type: object
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/V3Metadata'

    V3ForwardBankAccountRequest:
      type: object
      required:
        - connectorID
      properties:
        connectorID:
          type: string
          format: byte

    V3ForwardBankAccountResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - taskID
          properties:
            taskID:
              description: >
                Since this call is asynchronous, the response will contain the ID of the task that was created to forward the bank account to the PSP. You can use the task API to check the status of
                the task and get the resulting bank account ID.
              type: string

    V3BankAccountsCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: ''
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3BankAccount'

    V3GetBankAccountResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3BankAccount'

    V3BankAccount:
      type: object
      required:
        - id
        - createdAt
        - name
      properties:
        id:
          type: string
        createdAt:
          type: string
          format: date-time
        name:
          type: string
        accountNumber:
          type: string
          nullable: true
        iban:
          type: string
          nullable: true
        swiftBicCode:
          type: string
          nullable: true
        country:
          type: string
          nullable: true
        metadata:
          $ref: '#/components/schemas/V3Metadata'
        relatedAccounts:
          type: array
          items:
            $ref: '#/components/schemas/V3BankAccountRelatedAccount'

    V3BankAccountRelatedAccount:
      type: object
      required:
        - accountID
        - createdAt
      properties:
        accountID:
          type: string
        createdAt:
          type: string
          format: date-time

    # CONNECTORS
    V3InstallConnectorRequest:
      $ref: '#/components/schemas/V3ConnectorConfig'

    V3InstallConnectorResponse:
      type: object
      required:
        - data
      properties:
        data:
          description: The ID of the created connector
          type: string

    V3UninstallConnectorResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - taskID
          properties:
            taskID:
              description: >
                Since this call is asynchronous, the response will contain the ID of the task that was created to uninstall the connector. You can use the task API to check the status of the task and
                get the results.
              type: string

    V3ResetConnectorResponse:
      type: object
      required:
        - data
      properties:
        data:
          description: >
            Since this call is asynchronous, the response will contain the ID of the task that was created to reset the connector. You can use the task API to check the status of the task and get the
            results.
          type: string

    V3ConnectorConfigsResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          additionalProperties:
            type: object
            additionalProperties:
              type: object
              required:
                - dataType
                - required
              properties:
                dataType:
                  type: string
                required:
                  type: boolean
                defaultValue:
                  type: string

    V3GetConnectorConfigResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3ConnectorConfig'

    V3UpdateConnectorRequest:
      $ref: '#/components/schemas/V3ConnectorConfig'

    V3ConnectorsCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: ''
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3Connector'

    V3ConnectorSchedulesCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: ''
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3Schedule'

    V3ConnectorScheduleResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3Schedule'

    V3ConnectorScheduleInstancesCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: ''
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3Instance'

    V3Connector:
      type: object
      required:
        - id
        - reference
        - name
        - createdAt
        - provider
        - scheduledForDeletion
        - config
      properties:
        id:
          type: string
        reference:
          type: string
        name:
          type: string
        createdAt:
          type: string
          format: date-time
        provider:
          type: string
        scheduledForDeletion:
          type: boolean
        config:
          type: object

    V3ConnectorBase:
      type: object
      properties:
        id:
          type: string
        reference:
          type: string
        name:
          type: string
        createdAt:
          type: string
          format: date-time
        provider:
          type: string

    V3Schedule:
      type: object
      required:
        - id
        - connectorID
        - createdAt
      properties:
        id:
          type: string
        connectorID:
          type: string
          format: byte
        createdAt:
          type: string
          format: date-time

    V3Instance:
      type: object
      required:
        - id
        - connectorID
        - scheduleID
        - createdAt
        - updatedAt
        - terminated
      properties:
        id:
          type: string
        connectorID:
          type: string
          format: byte
        scheduleID:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        terminated:
          type: boolean
        terminatedAt:
          type: string
          format: date-time
        error:
          type: string
          nullable: true

    # PAYMENTS
    V3CreatePaymentRequest:
      type: object
      required:
        - reference
        - connectorID
        - createdAt
        - type
        - initialAmount
        - amount
        - asset
        - scheme
      properties:
        reference:
          type: string
        connectorID:
          type: string
          format: byte
        createdAt:
          type: string
          format: date-time
        type:
          $ref: '#/components/schemas/V3PaymentTypeEnum'
        initialAmount:
          type: integer
          format: bigint
        amount:
          type: integer
          format: bigint
        asset:
          type: string
          pattern: ^[a-zA-Z]{3}\/[0-9]$
        scheme:
          type: string
        sourceAccountID:
          type: string
          format: byte
        destinationAccountID:
          type: string
          format: byte
        metadata:
          $ref: '#/components/schemas/V3Metadata'
        adjustments:
          type: array
          items:
            $ref: '#/components/schemas/V3CreatePaymentAdjustmentRequest'

    V3CreatePaymentAdjustmentRequest:
      type: object
      required:
        - reference
        - createdAt
        - status
      properties:
        reference:
          type: string
        createdAt:
          type: string
          format: date-time
        status:
          $ref: '#/components/schemas/V3PaymentStatusEnum'
        amount:
          type: integer
          format: bigint
        asset:
          type: string
          pattern: ^[a-zA-Z]{3}\/[0-9]$
        metadata:
          $ref: '#/components/schemas/V3Metadata'

    V3CreatePaymentResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3Payment'

    V3UpdatePaymentMetadataRequest:
      type: object
      required:
        - metadata
      properties:
        metadata:
          $ref: '#/components/schemas/V3Metadata'

    V3PaymentsCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: ''
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3Payment'

    V3GetPaymentResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3Payment'

    V3Payment:
      type: object
      required:
        - id
        - connectorID
        - provider
        - reference
        - createdAt
        - type
        - initialAmount
        - amount
        - asset
        - scheme
        - status
      properties:
        id:
          type: string
        connectorID:
          type: string
          format: byte
        provider:
          type: string
        reference:
          type: string
        createdAt:
          type: string
          format: date-time
        type:
          $ref: '#/components/schemas/V3PaymentTypeEnum'
        initialAmount:
          type: integer
          format: bigint
        amount:
          type: integer
          format: bigint
        asset:
          type: string
        scheme:
          type: string
        status:
          $ref: '#/components/schemas/V3PaymentStatusEnum'
        sourceAccountID:
          type: string
          format: byte
          nullable: true
        destinationAccountID:
          type: string
          format: byte
          nullable: true
        metadata:
          $ref: '#/components/schemas/V3Metadata'
        adjustments:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/V3PaymentAdjustment'

    V3PaymentAdjustment:
      type: object
      required:
        - id
        - reference
        - createdAt
        - status
        - raw
      properties:
        id:
          type: string
        reference:
          type: string
        createdAt:
          type: string
          format: date-time
        status:
          $ref: '#/components/schemas/V3PaymentStatusEnum'
        amount:
          type: integer
          format: bigint
        asset:
          type: string
        metadata:
          $ref: '#/components/schemas/V3Metadata'
        raw:
          type: object

    V3PaymentTypeEnum:
      type: string
      enum:
        - UNKNOWN
        - PAY-IN
        - PAYOUT
        - TRANSFER
        - OTHER

    V3PaymentStatusEnum:
      type: string
      enum:
        - UNKNOWN
        - PENDING
        - SUCCEEDED
        - CANCELLED
        - FAILED
        - EXPIRED
        - REFUNDED
        - REFUNDED_FAILURE
        - REFUND_REVERSED
        - DISPUTE
        - DISPUTE_WON
        - DISPUTE_LOST
        - AMOUNT_ADJUSTEMENT
        - AUTHORISATION
        - CAPTURE
        - CAPTURE_FAILED
        - OTHER

    # TRADES
    V3CreateTradeRequest:
      type: object
      required:
        - reference
        - connectorID
        - createdAt
        - instrumentType
        - executionModel
        - market
        - side
        - status
        - executed
        - fills
      properties:
        reference:
          type: string
          minLength: 3
          maxLength: 1000
        connectorID:
          type: string
          format: byte
        createdAt:
          type: string
          format: date-time
        portfolioAccountID:
          type: string
          format: byte
          nullable: true
        instrumentType:
          $ref: '#/components/schemas/V3TradeInstrumentTypeEnum'
        executionModel:
          $ref: '#/components/schemas/V3TradeExecutionModelEnum'
        market:
          $ref: '#/components/schemas/V3TradeMarket'
        side:
          $ref: '#/components/schemas/V3TradeSideEnum'
        orderType:
          $ref: '#/components/schemas/V3TradeOrderTypeEnum'
        timeInForce:
          $ref: '#/components/schemas/V3TradeTimeInForceEnum'
        status:
          $ref: '#/components/schemas/V3TradeStatusEnum'
        requested:
          type: object
          nullable: true
        executed:
          $ref: '#/components/schemas/V3TradeExecuted'
        fees:
          type: array
          items:
            $ref: '#/components/schemas/V3TradeFee'
        fills:
          type: array
          minItems: 1
          items:
            $ref: '#/components/schemas/V3TradeFill'
        metadata:
          $ref: '#/components/schemas/V3Metadata'
        createPayments:
          type: boolean

    V3CreateTradeResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3Trade'

    V3GetTradeResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3Trade'

    V3TradesCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
            previous:
              type: string
            next:
              type: string
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3Trade'

    V3UpdateTradeMetadataRequest:
      type: object
      additionalProperties:
        type: string

    V3Trade:
      type: object
      required:
        - id
        - reference
        - connectorID
        - provider
        - createdAt
        - updatedAt
        - instrumentType
        - executionModel
        - market
        - side
        - status
        - executed
        - fills
      properties:
        id:
          type: string
        reference:
          type: string
        connectorID:
          type: string
          format: byte
        provider:
          type: string
        portfolioAccountID:
          type: string
          format: byte
          nullable: true
        instrumentType:
          $ref: '#/components/schemas/V3TradeInstrumentTypeEnum'
        executionModel:
          $ref: '#/components/schemas/V3TradeExecutionModelEnum'
        market:
          $ref: '#/components/schemas/V3TradeMarket'
        side:
          $ref: '#/components/schemas/V3TradeSideEnum'
        orderType:
          $ref: '#/components/schemas/V3TradeOrderTypeEnum'
        timeInForce:
          $ref: '#/components/schemas/V3TradeTimeInForceEnum'
        status:
          $ref: '#/components/schemas/V3TradeStatusEnum'
        requested:
          type: object
          nullable: true
        executed:
          $ref: '#/components/schemas/V3TradeExecuted'
        fees:
          type: array
          items:
            $ref: '#/components/schemas/V3TradeFee'
        fills:
          type: array
          minItems: 1
          items:
            $ref: '#/components/schemas/V3TradeFill'
        legs:
          type: array
          items:
            $ref: '#/components/schemas/V3TradeLeg'
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        raw:
          type: object
        metadata:
          $ref: '#/components/schemas/V3Metadata'

    V3TradeExecuted:
      type: object
      required:
        - quantity
        - quoteAmount
        - averagePrice
      properties:
        quantity:
          type: string
        quoteAmount:
          type: string
        averagePrice:
          type: string
        completedAt:
          type: string
          format: date-time

    V3TradeMarket:
      type: object
      required:
        - symbol
        - baseAsset
        - quoteAsset
      properties:
        symbol:
          type: string
          example: USDC-EUR
        baseAsset:
          type: string
          example: USDC/6
        quoteAsset:
          type: string
          example: EUR/2

    V3TradeFill:
      type: object
      required:
        - tradeReference
        - timestamp
        - price
        - quantity
        - quoteAmount
      properties:
        tradeReference:
          type: string
        timestamp:
          type: string
          format: date-time
        price:
          type: string
        quantity:
          type: string
        quoteAmount:
          type: string
        liquidity:
          $ref: '#/components/schemas/V3TradeLiquidityEnum'
        fees:
          type: array
          items:
            $ref: '#/components/schemas/V3TradeFee'
        raw:
          type: object

    V3TradeFee:
      type: object
      required:
        - asset
        - amount
      properties:
        asset:
          type: string
        amount:
          type: string
        kind:
          $ref: '#/components/schemas/V3TradeFeeKindEnum'
        appliedOn:
          $ref: '#/components/schemas/V3TradeFeeAppliedOnEnum'
        rate:
          type: string

    V3TradeLeg:
      type: object
      required:
        - role
        - direction
        - asset
        - netAmount
      properties:
        role:
          $ref: '#/components/schemas/V3TradeLegRoleEnum'
        direction:
          $ref: '#/components/schemas/V3TradeLegDirectionEnum'
        asset:
          type: string
        netAmount:
          type: string
        paymentID:
          type: string
          format: byte
          nullable: true
        status:
          $ref: '#/components/schemas/V3PaymentStatusEnum'

    V3TradeStatusEnum:
      type: string
      enum:
        - OPEN
        - PARTIALLY_FILLED
        - FILLED
        - CANCELED
        - REJECTED
        - EXPIRED

    V3TradeSideEnum:
      type: string
      enum:
        - BUY
        - SELL

    V3TradeInstrumentTypeEnum:
      type: string
      enum:
        - SPOT
        - FX

    V3TradeExecutionModelEnum:
      type: string
      enum:
        - ORDER_BOOK
        - RFQ

    V3TradeOrderTypeEnum:
      type: string
      enum:
        - MARKET
        - LIMIT
        - STOP_LIMIT
        - STOP_MARKET
        - RFQ

    V3TradeTimeInForceEnum:
      type: string
      enum:
        - GTC
        - IOC
        - FOK
        - DAY

    V3TradeLiquidityEnum:
      type: string
      enum:
        - MAKER
        - TAKER
        - UNKNOWN

    V3TradeFeeKindEnum:
      type: string
      enum:
        - MAKER
        - TAKER
        - OTHER

    V3TradeFeeAppliedOnEnum:
      type: string
      enum:
        - QUOTE
        - BASE
        - OTHER

    V3TradeLegRoleEnum:
      type: string
      enum:
        - BASE
        - QUOTE

    V3TradeLegDirectionEnum:
      type: string
      enum:
        - CREDIT
        - DEBIT

    # PAYMENT INITIATIONS
    V3InitiatePaymentRequest:
      type: object
      required:
        - reference
        - scheduledAt
        - connectorID
        - description
        - type
        - amount
        - asset
      properties:
        reference:
          type: string
          minLength: 3
          maxLength: 1000
        scheduledAt:
          type: string
          format: date-time
        connectorID:
          type: string
          format: byte
        description:
          type: string
          maxLength: 10000
        type:
          $ref: '#/components/schemas/V3PaymentInitiationTypeEnum'
        amount:
          type: integer
          format: bigint
        asset:
          type: string
          pattern: ^[a-zA-Z]{3}\/[0-9]$
        sourceAccountID:
          type: string
          format: byte
          nullable: true
        destinationAccountID:
          type: string
          format: byte
        metadata:
          $ref: '#/components/schemas/V3Metadata'

    V3InitiatePaymentResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          properties:
            paymentInitiationID:
              description: >
                Related payment initiation object ID created.
              type: string
            taskID:
              description: >
                Will be filled if the noValidation query parameter is set to true. Since this call is asynchronous, the response will contain the ID of the task that was created to create the payment
                on the PSP. You can use the task API to check the status of the task and get the resulting payment ID
              type: string

    V3RetryPaymentInitiationResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - taskID
          properties:
            taskID:
              description: >
                Since this call is asynchronous, the response will contain the ID of the task that was created to retry the payment initiation to the PSP. You can use the task API to check the status
                of the task and get the resulting payment ID.
              type: string

    V3ApprovePaymentInitiationResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - taskID
          properties:
            taskID:
              description: >
                Since this call is asynchronous, the response will contain the ID of the task that was created to approve the payment initiation. You can use the task API to check the status of the
                task and get the resulting payment ID.
              type: string

    V3ReversePaymentInitiationRequest:
      type: object
      required:
        - reference
        - description
        - amount
        - asset
      properties:
        reference:
          type: string
          minLength: 3
          maxLength: 1000
        description:
          type: string
          maxLength: 10000
        amount:
          type: integer
          format: bigint
        asset:
          type: string
          pattern: ^[a-zA-Z]{3}\/[0-9]$
        metadata:
          $ref: '#/components/schemas/V3Metadata'

    V3ReversePaymentInitiationResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          properties:
            taskID:
              description: >
                Since this call is asynchronous, the response will contain the ID of the task that was created to reverse the payment initiation. You can use the task API to check the status of the
                task and get the resulting payment ID.
              type: string
            paymentInitiationReversalID:
              description: >
                Related payment initiation reversal object ID created.
              type: string

    V3PaymentInitiationsCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: ''
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3PaymentInitiation'

    V3PaymentInitiationAdjustmentsCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: ''
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3PaymentInitiationAdjustment'

    V3PaymentInitiationRelatedPaymentsCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: ''
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3Payment'

    V3PaymentInitiation:
      type: object
      required:
        - id
        - connectorID
        - provider
        - reference
        - createdAt
        - scheduledAt
        - description
        - type
        - amount
        - asset
        - status
      properties:
        id:
          type: string
        connectorID:
          type: string
          format: byte
        provider:
          type: string
        reference:
          type: string
        createdAt:
          type: string
          format: date-time
        scheduledAt:
          type: string
          format: date-time
        description:
          type: string
        type:
          $ref: '#/components/schemas/V3PaymentInitiationTypeEnum'
        amount:
          type: integer
          format: bigint
        asset:
          type: string
        status:
          $ref: '#/components/schemas/V3PaymentInitiationStatusEnum'
        sourceAccountID:
          type: string
          format: byte
        destinationAccountID:
          type: string
          format: byte
        error:
          type: string
          nullable: true
        metadata:
          $ref: '#/components/schemas/V3Metadata'

    V3PaymentInitiationAdjustment:
      type: object
      required:
        - id
        - createdAt
        - status
      properties:
        id:
          type: string
        createdAt:
          type: string
          format: date-time
        status:
          $ref: '#/components/schemas/V3PaymentInitiationStatusEnum'
        amount:
          type: integer
          format: bigint
        asset:
          type: string
        error:
          type: string
          nullable: true
        metadata:
          $ref: '#/components/schemas/V3Metadata'

    V3GetPaymentInitiationResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3PaymentInitiation'

    V3PaymentInitiationStatusEnum:
      type: string
      enum:
        - UNKNOWN
        - WAITING_FOR_VALIDATION
        - SCHEDULED_FOR_PROCESSING
        - PROCESSING
        - PROCESSED
        - FAILED
        - REJECTED
        - REVERSE_PROCESSING
        - REVERSE_FAILED
        - REVERSED

    V3PaymentInitiationTypeEnum:
      type: string
      enum:
        - UNKNOWN
        - TRANSFER
        - PAYOUT

    # PAYMENT SERVICE USERS
    V3CreatePaymentServiceUserRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
        contactDetails:
          $ref: '#/components/schemas/V3ContactDetailsRequest'
          nullable: true
        address:
          $ref: '#/components/schemas/V3AddressRequest'
          nullable: true
        bankAccountIDs:
          type: array
          items:
            type: string
          nullable: true
        metadata:
          $ref: '#/components/schemas/V3Metadata'

    V3AddressRequest:
      type: object
      properties: 
        streetNumber:
          type: string
        streetName:
          type: string
        city:
          type: string
        region:
          type: string
        postalCode:
          type: string
        country:
          type: string
    
    V3ContactDetailsRequest:
      type: object
      properties:
        email:
          type: string
        phoneNumber:
          type: string

    V3CreatePaymentServiceUserResponse:
      type: object
      required:
        - data
      properties:
        data:
          description: The ID of the created payment service user
          type: string

    V3PaymentServiceUserDeleteResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - taskID
          properties:
            taskID:
              description: >
                Since this call is asynchronous, the response will contain the ID of the task that was created to delete the payment service user. You can use the task API to check the status of
                the task.
              type: string
    
    V3PaymentServiceUserDeleteConnectorResponse: 
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - taskID
          properties:
            taskID:
              description: >
                Since this call is asynchronous, the response will contain the ID of the task that was created to delete the payment service user on the connector. You can use the task API to check the status of
                the task.
              type: string

    V3PaymentServiceUserDeleteConnectionResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - taskID
          properties:
            taskID:
              description: >
                Since this call is asynchronous, the response will contain the ID of the task that was created to delete the connection. You can use the task API to check the status of
                the task.
              type: string

    V3PaymentServiceUsersCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3PaymentServiceUser'

    V3PaymentServiceUserConnectionsCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3PaymentServiceUserConnection'

    V3PaymentServiceUserLinkAttemptsCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3PaymentServiceUserLinkAttempt'

    V3PaymentServiceUser:
      type: object
      required:
        - id
        - name
        - createdAt
      properties:
        id:
          type: string
        name:
          type: string
        createdAt:
          type: string
          format: date-time
        contactDetails:
          $ref: '#/components/schemas/V3ContactDetails'
          nullable: true
        address:
          $ref: '#/components/schemas/V3Address'
          nullable: true
        bankAccountIDs:
          type: array
          items:
            type: string
          nullable: true
        metadata:
          $ref: '#/components/schemas/V3Metadata'

    V3PaymentServiceUserConnection:
      type: object
      required:
        - connectionID
        - connectorID
        - createdAt
        - dataUpdatedAt
        - status
      properties:
        connectionID:
          type: string
        connectorID:
          type: string
        createdAt:
          type: string
          format: date-time
        dataUpdatedAt:
          type: string
          format: date-time
        status:
          $ref: '#/components/schemas/V3ConnectionStatusEnum'
        error:
          type: string
          nullable: true
        metadata:
          $ref: '#/components/schemas/V3Metadata'

    V3PaymentServiceUserLinkAttempt:
      type: object
      required:
        - id
        - psuID
        - connectorID
        - createdAt
        - status
        - clientRedirectURL
      properties:
        id:
          type: string
        psuID:
          type: string
        connectorID:
          type: string
        createdAt:
          type: string
          format: date-time
        status:
          $ref: '#/components/schemas/V3OpenBankingConnectionAttemptStatusEnum'
        clientRedirectURL:
          type: string
          format: url
        error:
          type: string
          nullable: true

    V3ContactDetails:
      type: object
      properties:
        email:
          type: string
        phoneNumber:
          type: string

    V3Address:
      type: object
      properties: 
        streetNumber:
          type: string
        streetName:
          type: string
        city:
          type: string
        region:
          type: string
        postalCode:
          type: string
        country:
          type: string

    V3GetPaymentServiceUserResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3PaymentServiceUser'

    V3ForwardPaymentServiceUserBankAccountRequest:
      type: object
      required:
        - connectorID
      properties:
        connectorID:
          type: string
          format: byte

    V3ForwardPaymentServiceUserBankAccountResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - taskID
          properties:
            taskID:
              description: >
                Since this call is asynchronous, the response will contain the ID of the task that was created to forward the bank account to the PSP. You can use the task API to check the status of
                the task and get the resulting bank account ID.
              type: string

    V3ConnectionStatusEnum:
      type: string
      enum:
        - ACTIVE
        - ERROR

    V3OpenBankingConnectionAttemptStatusEnum:
      type: string
      enum:
        - pending
        - completed
        - exited

    V3PaymentServiceUserCreateLinkRequest:
      type: object
      required:
        - clientRedirectURL
      properties:
        applicationName:
          type: string
          description: The name of the application to be displayed to the user when they click the link (depending on the open banking provider). Note that this field might be mandatory for some open banking providers.
        clientRedirectURL:
          type: string
          format: url
          description: The URL to redirect the user to after the link flow is completed.

    V3PaymentServiceUserCreateLinkResponse:
      type: object
      required:
        - attemptID
        - link
      properties:
        attemptID:
          type: string
        link:
          type: string
          format: url

    V3PaymentServiceUserUpdateLinkRequest:
      type: object
      required:
        - clientRedirectURL
      properties:
        applicationName:
          type: string
          description: The name of the application to be displayed to the user when they click the link (depending on the open banking provider). Note that this field might be mandatory for some open banking providers.
        clientRedirectURL:
          type: string
          format: url

    V3PaymentServiceUserUpdateLinkResponse:
      type: object
      required:
        - attemptID
        - link
      properties:
        attemptID:
          type: string
        link:
          type: string
          format: url

    # POOLS
    V3CreatePoolRequest:
      type: object
      required:
        - name
        - accountIDs
      properties:
        name:
          type: string
        accountIDs:
          type: array
          items:
            type: string

    V3CreatePoolResponse:
      type: object
      required:
        - data
      properties:
        data:
          description: The ID of the created pool
          type: string

    V3PoolsCursorResponse:
      type: object
      required:
        - cursor
      properties:
        cursor:
          type: object
          required:
            - pageSize
            - hasMore
            - data
          properties:
            pageSize:
              type: integer
              format: int64
              minimum: 1
              example: 15
            hasMore:
              type: boolean
              example: false
            previous:
              type: string
              example: YXVsdCBhbmQgYSBtYXhpbXVtIG1heF9yZXN1bHRzLol=
            next:
              type: string
              example: ''
            data:
              type: array
              items:
                $ref: '#/components/schemas/V3Pool'

    V3GetPoolResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3Pool'

    V3PoolBalancesResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3PoolBalances'

    V3Pool:
      type: object
      required:
        - id
        - name
        - createdAt
        - poolAccounts
      properties:
        id:
          type: string
        name:
          type: string
        createdAt:
          type: string
          format: date-time
        poolAccounts:
          type: array
          items:
            $ref: '#/components/schemas/V3AccountID'

    V3PoolBalances:
      type: array
      items:
        $ref: '#/components/schemas/V3PoolBalance'

    V3PoolBalance:
      type: object
      required:
        - asset
        - amount
      properties:
        asset:
          type: string
        amount:
          type: integer
          format: bigint

    # TASKS
    V3GetTaskResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/V3Task'

    V3Task:
      type: object
      required:
        - id
        - status
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
        status:
          $ref: '#/components/schemas/V3TaskStatusEnum'
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        connectorID:
          type: string
          format: byte
        createdObjectID:
          type: string
        error:
          type: string
          nullable: true

    V3TaskStatusEnum:
      type: string
      enum:
        - PROCESSING
        - SUCCEEDED
        - FAILED

    # OTHERS
    V3QueryBuilder:
      type: object
      additionalProperties: true

    V3Metadata:
      type: object
      additionalProperties:
        type: string
      nullable: true

    V3ErrorResponse:
      type: object
      required:
        - errorCode
        - errorMessage
      properties:
        errorCode:
          $ref: '#/components/schemas/V3ErrorsEnum'
        errorMessage:
          type: string
          example: '[VALIDATION] missing required config field: pollingPeriod'
        details:
          type: string
    V3ErrorsEnum:
      type: string
      enum:
        - INTERNAL
        - VALIDATION
        - INVALID_ID
        - MISSING_OR_INVALID_BODY
        - CONFLICT
        - NOT_FOUND
      example: VALIDATION
