# Go API client for genericclient

Generic connector API client for Formance Payments. This connector allows integration with any PSP that implements the Generic Connector API specification.

## Overview

This API client was generated by the [OpenAPI Generator](https://openapi-generator.tech) project.

- API version: v0.1
- Package version: latest
- Build package: org.openapitools.codegen.languages.GoClientCodegen

## Features

- **Account Management**: Fetch internal accounts and balances
- **Beneficiary Management**: Fetch external accounts (beneficiaries)
- **Transaction Polling**: Fetch and track payment transactions
- **Payment Initiation**: Create payouts and internal transfers
- **Bank Account Creation**: Create external bank accounts for payouts

## Installation

Install the following dependencies:

```shell
go get github.com/stretchr/testify/assert
go get golang.org/x/net/context
```

Put the package under your project folder and add the following in import:

```golang
import genericclient "github.com/formancehq/payments/genericclient"
```

## Configuration of Server URL

Default configuration comes with `Servers` field that contains server objects as defined in the OpenAPI specification.

### Select Server Configuration

```golang
ctx := context.WithValue(context.Background(), genericclient.ContextServerIndex, 1)
```

### Templated Server URL

```golang
ctx := context.WithValue(context.Background(), genericclient.ContextServerVariables, map[string]string{
    "basePath": "v2",
})
```

## Documentation for API Endpoints

All URIs are relative to *http://localhost*

### Data Fetching (Read Operations)

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*DefaultApi* | [**GetAccounts**](docs/DefaultApi.md#getaccounts) | **Get** /accounts | Get all internal accounts
*DefaultApi* | [**GetAccountBalances**](docs/DefaultApi.md#getaccountbalances) | **Get** /accounts/{accountId}/balances | Get account balances
*DefaultApi* | [**GetBeneficiaries**](docs/DefaultApi.md#getbeneficiaries) | **Get** /beneficiaries | Get all external accounts
*DefaultApi* | [**GetTransactions**](docs/DefaultApi.md#gettransactions) | **Get** /transactions | Get all transactions

### Payment Initiation (Write Operations)

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*DefaultApi* | [**CreatePayout**](docs/DefaultApi.md#createpayout) | **Post** /payouts | Create payout to external account
*DefaultApi* | [**GetPayoutStatus**](docs/DefaultApi.md#getpayoutstatus) | **Get** /payouts/{payoutId} | Poll payout status
*DefaultApi* | [**CreateTransfer**](docs/DefaultApi.md#createtransfer) | **Post** /transfers | Create internal transfer
*DefaultApi* | [**GetTransferStatus**](docs/DefaultApi.md#gettransferstatus) | **Get** /transfers/{transferId} | Poll transfer status
*DefaultApi* | [**CreateBankAccount**](docs/DefaultApi.md#createbankaccount) | **Post** /bank-accounts | Create external bank account


## Documentation For Models

### Core Models

- [Account](docs/Account.md) - Internal account
- [Balance](docs/Balance.md) - Account balance
- [Balances](docs/Balances.md) - Account balances container
- [Beneficiary](docs/Beneficiary.md) - External account (beneficiary)
- [Transaction](docs/Transaction.md) - Payment transaction
- [Error](docs/Error.md) - Error response

### Payment Initiation Models

- [PayoutRequest](docs/PayoutRequest.md) - Create payout request
- [Payout](docs/Payout.md) - Payout response
- [TransferRequest](docs/TransferRequest.md) - Create transfer request
- [Transfer](docs/Transfer.md) - Transfer response
- [BankAccountRequest](docs/BankAccountRequest.md) - Create bank account request
- [BankAccount](docs/BankAccount.md) - Bank account response

### Enums

- [TransactionType](docs/TransactionType.md) - PAYIN, PAYOUT, TRANSFER, OTHER
- [TransactionStatus](docs/TransactionStatus.md) - PENDING, PROCESSING, SUCCEEDED, FAILED, and 12 more


## Key Concepts

### Amount Format

All amounts are in **minor units** (smallest currency unit):
- `"10000"` = $100.00 USD
- `"1000"` = â‚¬10.00 EUR
- `"100000000"` = 1.00000000 BTC

### Currency/Asset Format (UMN)

Assets use Universal Monetary Notation:
- `"USD/2"` - US Dollar with 2 decimal places
- `"EUR/2"` - Euro with 2 decimal places
- `"BTC/8"` - Bitcoin with 8 decimal places
- `"JPY"` or `"JPY/0"` - Japanese Yen (no decimals)

### Payment Adjustments

To link related transactions (refunds, chargebacks), use `relatedTransactionID`:

```json
{
  "id": "refund_123",
  "relatedTransactionID": "original_payment_456",
  "type": "OTHER",
  "status": "REFUNDED",
  "amount": "5000"
}
```

### Pagination

All list endpoints use page-based pagination:
- `page`: Page number (1-based)
- `pageSize`: Items per page (default: 100)
- `sort`: Sort order (e.g., `createdAt:asc`)

Formance determines `hasMore` by checking if `len(results) >= pageSize`.


## Documentation For Authorization

Endpoints do not require authorization. Authentication is configured at the connector level.


## Documentation for Utility Methods

This package contains utility functions for obtaining pointers to basic types:

* `PtrBool`
* `PtrInt`
* `PtrInt32`
* `PtrInt64`
* `PtrFloat`
* `PtrFloat32`
* `PtrFloat64`
* `PtrString`
* `PtrTime`

## Author

Formance

